#//==============================================================================//#
"""
domain_guide.py
화장품 도메인 지식 for V4 ReAct Agent

사용자의 전처리 프롬프트에서 차용한 도메인 전문 지식:
- 카테고리별 분석 속성
- 불만사항 유형
- 구매동기 유형
- 조건부 분석 관점

last_updated: 2025.10.26
"""
#//==============================================================================//#

#//==============================================================================//#
# 카테고리별 분석 속성
#//==============================================================================//#

CATEGORY_ATTRIBUTES = {
    '스킨/토너': ['제형', '흡수력', '보습력', '산뜻함', '향', '가격'],
    '에센스/세럼/앰플': ['제형', '흡수력', '보습력', '끈적임', '향', '가격'],
    '크림': ['제형', '보습력', '발림성', '끈적임', '향', '가격'],
    '로션': ['제형', '보습력', '발림성', '끈적임', '향', '가격'],
    '미스트/오일': ['제형', '흡수력', '보습력', '끈적임', '향', '가격'],
    '선케어': ['제형', '백탁', '보습력', '끈적임', '향', '가격'],
    '마스크/팩': ['제형', '밀착력', '보습력', '향', '가격'],
    '클렌징': ['제형', '세정력', '자극', '촉촉함', '향', '가격'],
    '아이케어': ['제형', '보습력', '흡수력', '향', '가격'],
    '립메이크업': ['제형', '발색', '지속력', '촉촉함', '향', '가격'],
    '베이스메이크업': ['제형', '발색', '커버력', '지속력', '밀착력', '향', '가격'],
    '아이메이크업': ['제형', '발색', '지속력', '발림성', '날림', '향', '가격'],
    '기타': ['제형', '사용감', '향', '가격']
}

#//==============================================================================//#
# 속성별 이해
#//==============================================================================//#

ATTRIBUTE_EXPLANATIONS = {
    '제형': '텍스처, 타입, 사용감',
    '흡수력': '피부에 스며드는 속도 ("빠르다", "스며든다"가 긍정)',
    '보습력': '수분 유지 능력',
    '끈적임': '발림 후 끈적거림 (부정적 속성 - "산뜻", "가벼움"이 긍정)',
    '발색': '색상의 선명도',
    '커버력': '피부 고민(기미, 잡티 등) 커버 능력',
    '세정력': '클렌징 제품 특유의 속성, 메이크업이 잘 지워지는 것',
    '백탁': '선케어 제품 특유의 속성, 발랐을 때 하얗게 뜨는 것 (부정적)',
    '지속력': '효과 유지 시간',
    '향': '제품의 향',
    '가격': '가성비'
}

#//==============================================================================//#
# 불만사항 유형
#//==============================================================================//#

COMPLAINT_TYPES = [
    '용기/패키지 디자인',  # 펌프 불편, 뚜껑 안 열림
    '용기 내구성',         # 깨짐, 새는 문제
    '내용물 문제',         # 변질, 이물질, 분리
    '용량 부족',           # 표시보다 적음
    '색상/향 불만',        # 향이 너무 강함, 색상이 다름
    '광고와 다름',         # 광고 효과와 실제 차이
    '성분 문제',           # 알레르기 반응
    '사진과 다름',         # 실물이 사진과 다름
    '가짜 의심',           # 정품 의심
    '유통기한'             # 유통기한 임박/지남
]

#//==============================================================================//#
# 구매동기 유형
#//==============================================================================//#

PURCHASE_MOTIVES = [
    '인플루언서',         # 유튜버 추천, 인스타그래머
    '지인추천',           # 친구가 좋다고
    '온라인커뮤니티',     # 화해 평점, 글로우픽
    '광고',               # 광고 보고
    '매장',               # 매장 직원 추천, 테스터
    '브랜드인지도',       # 유명해서, 베스트셀러
    '재구매'              # 또 샀어요, 리필
]

#//==============================================================================//#
# 조건부 분석 관점
#//==============================================================================//#

CONDITIONAL_ASPECTS = {
    '피부타입': ['건성', '지성', '민감성', '복합성'],
    '계절': ['여름', '겨울', '봄', '가을'],
    '사용시점': ['아침', '저녁', '밤'],
    '연령대': ['10대', '20대', '30대', '40대', '50대 이상']
}

#//==============================================================================//#
# 도메인 가이드 텍스트 생성
#//==============================================================================//#

def get_domain_guide(category: str = None) -> str:
    """
    화장품 도메인 가이드 텍스트 생성

    Args:
        category: 제품 카테고리 (없으면 일반)

    Returns:
        도메인 가이드 문자열
    """

    # 카테고리별 속성
    if category and category in CATEGORY_ATTRIBUTES:
        attributes = CATEGORY_ATTRIBUTES[category]
    else:
        attributes = ['제형', '사용감', '향', '가격']

    attributes_str = ', '.join(attributes)

    # 불만사항 유형
    complaints_str = ', '.join(COMPLAINT_TYPES)

    # 구매동기 유형
    motives_str = ', '.join(PURCHASE_MOTIVES)

    guide = f"""
[화장품 도메인 가이드]

**제품 카테고리**: {category if category else '일반'}
**주요 분석 속성 (참고용)**: {attributes_str}

**속성별 이해**:
- 끈적임: 부정적 속성 ("산뜻", "가벼움"이 긍정)
- 흡수력: "빠르다", "스며든다"가 긍정
- 백탁: 선케어 특유 속성, "안 뜬다"가 긍정
- 세정력: 클렌징 특유 속성, "잘 지워진다"가 긍정

**불만사항 유형**: {complaints_str}

**구매동기 유형**: {motives_str}

**조건부 분석 관점**:
- 피부타입: 건성, 지성, 민감성, 복합성
- 계절: 여름(끈적임 민감), 겨울(보습 중요)
- 사용 시점: 아침(산뜻함 선호), 저녁(영양감 선호)
"""

    return guide
